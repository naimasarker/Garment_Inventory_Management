<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.3/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        .input-focus {
            transition: all 0.3s ease;
        }
        .input-focus:focus {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }
        .table-hover:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
        }
        .status-pending { @apply bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium; }
        .status-approved { @apply bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium; }
        .status-rejected { @apply bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium; }
        .status-completed { @apply bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium; }
        .transaction-in { @apply bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full text-sm font-medium; }
        .transaction-out { @apply bg-rose-100 text-rose-800 px-3 py-1 rounded-full text-sm font-medium; }
        .animate-slide-in {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen" x-data="inventoryApp()" x-cloak>
    

    <div x-show="!isAuthenticated" class="min-h-screen gradient-bg flex items-center justify-center px-4">
        <div class="max-w-md w-full">
            <div class="bg-white rounded-2xl card-shadow p-8 animate-slide-in">
                <div class="text-center mb-8">
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">Garment Inventory System</h1>
                    <p class="text-gray-600">স্টক ম্যানেজমেন্ট সিস্টেম</p>
                </div>

                
                <div class="flex mb-6 bg-gray-100 rounded-lg p-1">
                    <button @click="authMode = 'login'" 
                            :class="authMode === 'login' ? 'btn-primary text-white' : 'text-gray-600'"
                            class="flex-1 py-2 px-4 rounded-md transition-all duration-300 font-medium">
                        Login
                    </button>
                    <button @click="authMode = 'register'" 
                            :class="authMode === 'register' ? 'btn-primary text-white' : 'text-gray-600'"
                            class="flex-1 py-2 px-4 rounded-md transition-all duration-300 font-medium">
                        Register
                    </button>
                </div>

                
                <form x-show="authMode === 'login'" @submit.prevent="login" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" x-model="loginData.email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" x-model="loginData.password" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                    </div>
                    <button type="submit" :disabled="loading" 
                            class="w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50">
                        <span x-show="!loading">Login</span>
                        <span x-show="loading">Logging in...</span>
                    </button>
                </form>

                
                <form x-show="authMode === 'register'" @submit.prevent="register" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Name</label>
                        <input type="text" x-model="registerData.name" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" x-model="registerData.email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" x-model="registerData.password" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                    </div>
                    <button type="submit" :disabled="loading" 
                            class="w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50">
                        <span x-show="!loading">Register</span>
                        <span x-show="loading">Registering...</span>
                    </button>
                </form>

                
                <div x-show="showVerification" class="mt-6 p-4 bg-blue-50 rounded-lg">
                    <p class="text-sm text-blue-600 mb-4">Please verify your email with the OTP sent to your email address.</p>
                    <div class="space-y-4">
                        <input type="text" x-model="verificationData.otp" placeholder="Enter OTP" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent input-focus">
                        <button @click="verifyEmail" :disabled="loading" 
                                class="w-full btn-primary text-white py-3 rounded-lg font-medium disabled:opacity-50">
                            <span x-show="!loading">Verify Email</span>
                            <span x-show="loading">Verifying...</span>
                        </button>
                    </div>
                </div>

                <!-- Alert Messages -->
                <div x-show="alert.show" x-transition class="mt-4 p-4 rounded-lg" 
                     :class="alert.type === 'success' ? 'bg-green-50 text-green-600' : 'bg-red-50 text-red-600'">
                    <p x-text="alert.message"></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div x-show="isAuthenticated" class="min-h-screen bg-gray-50">
        <!-- Header -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <h1 class="text-2xl font-bold text-gray-900">Inventory Management</h1>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-sm text-gray-600">Welcome, User!</span>
                        <button @click="logout" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="bg-white shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex space-x-8">
                    <button @click="currentTab = 'dashboard'" 
                            :class="currentTab === 'dashboard' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700'"
                            class="border-b-2 py-4 px-1 font-medium text-sm transition-colors">
                        Dashboard
                    </button>
                    <button @click="currentTab = 'products'" 
                            :class="currentTab === 'products' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700'"
                            class="border-b-2 py-4 px-1 font-medium text-sm transition-colors">
                        Products
                    </button>
                    <button @click="currentTab = 'categories'" 
                            :class="currentTab === 'categories' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700'"
                            class="border-b-2 py-4 px-1 font-medium text-sm transition-colors">
                        Categories
                    </button>
                    <button @click="currentTab = 'orders'" 
                            :class="currentTab === 'orders' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700'"
                            class="border-b-2 py-4 px-1 font-medium text-sm transition-colors">
                        Purchase Orders
                    </button>
                    <button @click="currentTab = 'stock'" 
                            :class="currentTab === 'stock' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700'"
                            class="border-b-2 py-4 px-1 font-medium text-sm transition-colors">
                        Stock Transactions
                    </button>
                </div>
            </div>
        </nav>

    
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

            <div x-show="currentTab === 'dashboard'" class="animate-fade-in">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl card-shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-100">
                                <div class="w-6 h-6 bg-blue-500 rounded"></div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-900">Total Products</h3>
                                <p class="text-3xl font-bold text-blue-600" x-text="products.length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl card-shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-100">
                                <div class="w-6 h-6 bg-green-500 rounded"></div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-900">Categories</h3>
                                <p class="text-3xl font-bold text-green-600" x-text="categories.length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl card-shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-purple-100">
                                <div class="w-6 h-6 bg-purple-500 rounded"></div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-900">Purchase Orders</h3>
                                <p class="text-3xl font-bold text-purple-600" x-text="orders.length"></p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl card-shadow p-6">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-orange-100">
                                <div class="w-6 h-6 bg-orange-500 rounded"></div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-900">Transactions</h3>
                                <p class="text-3xl font-bold text-orange-600" x-text="transactions.length"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl card-shadow p-6">
                    <h3 class="text-xl font-semibold mb-4">Recent Activity</h3>
                    <p class="text-gray-600">Recent transactions and orders will appear here...</p>
                </div>
            </div>

            
            <div x-show="currentTab === 'products'" class="animate-fade-in">
                <div class="bg-white rounded-xl card-shadow">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-gray-900">Products</h2>
                            <button @click="showProductForm = true; editingProduct = null" 
                                    class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
                                Add Product
                            </button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="product in products" :key="product.id">
                                    <tr class="table-hover">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="font-medium text-gray-900" x-text="product.name"></div>
                                            <div class="text-sm text-gray-500" x-text="product.description"></div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="product.category"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">৳<span x-text="product.price"></span></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="product.stock"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button @click="editProduct(product)" class="text-indigo-600 hover:text-indigo-900 mr-3">Edit</button>
                                            <button @click="deleteProduct(product.id)" class="text-red-600 hover:text-red-900">Delete</button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Categories Tab -->
            <div x-show="currentTab === 'categories'" class="animate-fade-in">
                <div class="bg-white rounded-xl card-shadow">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-gray-900">Categories</h2>
                            <button @click="showCategoryForm = true; editingCategory = null" 
                                    class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
                                Add Category
                            </button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="category in categories" :key="category.id">
                                    <tr class="table-hover">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" x-text="category.name"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button @click="editCategory(category)" class="text-indigo-600 hover:text-indigo-900 mr-3">Edit</button>
                                            <button @click="deleteCategory(category.id)" class="text-red-600 hover:text-red-900">Delete</button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Purchase Orders Tab -->
            <div x-show="currentTab === 'orders'" class="animate-fade-in">
                <div class="bg-white rounded-xl card-shadow">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-gray-900">Purchase Orders</h2>
                            <button @click="showOrderForm = true" 
                                    class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
                                Create Order
                            </button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Supplier</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="order in orders" :key="order.id">
                                    <tr class="table-hover">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" x-text="order.id"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="order.supplier"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">৳<span x-text="order.total"></span></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="'status-' + order.status" x-text="order.status"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <select @change="updateOrderStatus(order.id, $event.target.value)" 
                                                    class="border border-gray-300 rounded px-2 py-1 text-sm">
                                                <option value="pending" :selected="order.status === 'pending'">Pending</option>
                                                <option value="approved" :selected="order.status === 'approved'">Approved</option>
                                                <option value="completed" :selected="order.status === 'completed'">Completed</option>
                                                <option value="rejected" :selected="order.status === 'rejected'">Rejected</option>
                                            </select>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Stock Transactions Tab -->
            <div x-show="currentTab === 'stock'" class="animate-fade-in">
                <div class="bg-white rounded-xl card-shadow">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex justify-between items-center">
                            <h2 class="text-2xl font-bold text-gray-900">Stock Transactions</h2>
                            <button @click="showStockForm = true" 
                                    class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
                                Record Transaction
                            </button>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quantity</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Note</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="transaction in transactions" :key="transaction.id">
                                    <tr class="table-hover">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" x-text="transaction.product"></td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="'transaction-' + transaction.type" x-text="transaction.type"></span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="transaction.quantity"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" x-text="transaction.date"></td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" x-text="transaction.note"></td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>

        <!-- Product Form Modal -->
        <div x-show="showProductForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition>
            <div class="bg-white rounded-2xl max-w-md w-full p-6 card-shadow">
                <h3 class="text-xl font-bold mb-6" x-text="editingProduct ? 'Edit Product' : 'Add Product'"></h3>
                <form @submit.prevent="submitProduct" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" x-model="productForm.name" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea x-model="productForm.description" rows="3"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                        <select x-model="productForm.category_id" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Category</option>
                            <template x-for="category in categories" :key="category.id">
                                <option :value="category.id" x-text="category.name"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Price</label>
                        <input type="number" x-model="productForm.price" step="0.01" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Stock Quantity</label>
                        <input type="number" x-model="productForm.stock" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="submit" class="flex-1 btn-primary text-white py-2 rounded-lg font-medium">
                            <span x-text="editingProduct ? 'Update' : 'Add'"></span>
                        </button>
                        <button type="button" @click="showProductForm = false" class="flex-1 bg-gray-500 text-white py-2 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Category Form Modal -->
        <div x-show="showCategoryForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition>
            <div class="bg-white rounded-2xl max-w-md w-full p-6 card-shadow">
                <h3 class="text-xl font-bold mb-6" x-text="editingCategory ? 'Edit Category' : 'Add Category'"></h3>
                <form @submit.prevent="submitCategory" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Category Name</label>
                        <input type="text" x-model="categoryForm.name" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="submit" class="flex-1 btn-primary text-white py-2 rounded-lg font-medium">
                            <span x-text="editingCategory ? 'Update' : 'Add'"></span>
                        </button>
                        <button type="button" @click="showCategoryForm = false" class="flex-1 bg-gray-500 text-white py-2 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Order Form Modal -->
        <div x-show="showOrderForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition>
            <div class="bg-white rounded-2xl max-w-lg w-full p-6 card-shadow">
                <h3 class="text-xl font-bold mb-6">Create Purchase Order</h3>
                <form @submit.prevent="submitOrder" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Supplier Name</label>
                        <input type="text" x-model="orderForm.supplier" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Product</label>
                        <select x-model="orderForm.product_id" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Product</option>
                            <template x-for="product in products" :key="product.id">
                                <option :value="product.id" x-text="product.name"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
                        <input type="number" x-model="orderForm.quantity" required min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Unit Price</label>
                        <input type="number" x-model="orderForm.unit_price" step="0.01" required
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Total Amount</label>
                        <input type="number" x-model="orderForm.total" step="0.01" readonly
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea x-model="orderForm.notes" rows="3"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="submit" class="flex-1 btn-primary text-white py-2 rounded-lg font-medium">
                            Create Order
                        </button>
                        <button type="button" @click="showOrderForm = false" class="flex-1 bg-gray-500 text-white py-2 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>

        
        <div x-show="showStockForm" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50" x-transition>
            <div class="bg-white rounded-2xl max-w-md w-full p-6 card-shadow">
                <h3 class="text-xl font-bold mb-6">Record Stock Transaction</h3>
                <form @submit.prevent="submitStockTransaction" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Product</label>
                        <select x-model="stockForm.product_id" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Product</option>
                            <template x-for="product in products" :key="product.id">
                                <option :value="product.id" x-text="product.name"></option>
                            </template>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Transaction Type</label>
                        <select x-model="stockForm.type" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Type</option>
                            <option value="in">Stock In</option>
                            <option value="out">Stock Out</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Quantity</label>
                        <input type="number" x-model="stockForm.quantity" required min="1"
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea x-model="stockForm.notes" rows="3"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex space-x-3 pt-4">
                        <button type="submit" class="flex-1 btn-primary text-white py-2 rounded-lg font-medium">
                            Record Transaction
                        </button>
                        <button type="button" @click="showStockForm = false" class="flex-1 bg-gray-500 text-white py-2 rounded-lg font-medium">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        function inventoryApp() {
            return {
                
                isAuthenticated: false,
                authMode: 'login',
                showVerification: false,
                loading: false,
                alert: { show: false, type: '', message: '' },
                
                
                loginData: { email: '', password: '' },
                registerData: { name: '', email: '', password: '' },
                verificationData: { email: '', otp: '' },
                
            
                currentTab: 'dashboard',
                
                
                products: [],
                categories: [],
                orders: [],
                transactions: [],
                
                // Form states
                showProductForm: false,
                showCategoryForm: false,
                showOrderForm: false,
                showStockForm: false,
                
                // Editing states
                editingProduct: null,
                editingCategory: null,
                
                // Forms
                productForm: { name: '', description: '', category_id: '', price: '', stock: '' },
                categoryForm: { name: '' },
                orderForm: { supplier: '', product_id: '', quantity: '', unit_price: '', total: '', notes: '' },
                stockForm: { product_id: '', type: '', quantity: '', notes: '' },
                
                // Initialize
                init() {
                    this.loadSampleData();
                    this.watchOrderCalculation();
                },
                
                
                async login() {
                    this.loading = true;
                    try {
                    
                        await this.delay(1000);
                        
                        if (this.loginData.email && this.loginData.password) {
                            this.isAuthenticated = true;
                            this.showAlert('success', 'Login successful!');
                            this.loadData();
                        } else {
                            this.showAlert('error', 'Invalid credentials');
                        }
                    } catch (error) {
                        this.showAlert('error', 'Login failed');
                    } finally {
                        this.loading = false;
                    }
                },
                
                async register() {
                    this.loading = true;
                    try {
                        // Simulate API call
                        await this.delay(1000);
                        
                        if (this.registerData.name && this.registerData.email && this.registerData.password) {
                            this.verificationData.email = this.registerData.email;
                            this.showVerification = true;
                            this.showAlert('success', 'Registration successful! Please verify your email.');
                        } else {
                            this.showAlert('error', 'Please fill all fields');
                        }
                    } catch (error) {
                        this.showAlert('error', 'Registration failed');
                    } finally {
                        this.loading = false;
                    }
                },
                
                async verifyEmail() {
                    this.loading = true;
                    try {
                        // Simulate API call
                        await this.delay(1000);
                        
                        if (this.verificationData.otp) {
                            this.isAuthenticated = true;
                            this.showVerification = false;
                            this.showAlert('success', 'Email verified successfully!');
                            this.loadData();
                        } else {
                            this.showAlert('error', 'Invalid OTP');
                        }
                    } catch (error) {
                        this.showAlert('error', 'Verification failed');
                    } finally {
                        this.loading = false;
                    }
                },
                
                logout() {
                    this.isAuthenticated = false;
                    this.currentTab = 'dashboard';
                    this.resetForms();
                },
                
                // Product methods
                async loadProducts() {
                    // Simulate API call
                    // const response = await fetch('/api/products');
                    // this.products = await response.json();
                },
                
                editProduct(product) {
                    this.editingProduct = product;
                    this.productForm = { ...product };
                    this.showProductForm = true;
                },
                
                async submitProduct() {
                    try {
                        if (this.editingProduct) {
                            // Update product
                            const index = this.products.findIndex(p => p.id === this.editingProduct.id);
                            if (index !== -1) {
                                this.products[index] = { ...this.productForm, id: this.editingProduct.id };
                            }
                            this.showAlert('success', 'Product updated successfully!');
                        } else {
                            // Add new product
                            const newProduct = {
                                ...this.productForm,
                                id: Date.now(),
                                category: this.categories.find(c => c.id == this.productForm.category_id)?.name || 'Unknown'
                            };
                            this.products.push(newProduct);
                            this.showAlert('success', 'Product added successfully!');
                        }
                        this.showProductForm = false;
                        this.resetProductForm();
                    } catch (error) {
                        this.showAlert('error', 'Failed to save product');
                    }
                },
                
                async deleteProduct(id) {
                    if (confirm('Are you sure you want to delete this product?')) {
                        this.products = this.products.filter(p => p.id !== id);
                        this.showAlert('success', 'Product deleted successfully!');
                    }
                },
                
                // Category methods
                editCategory(category) {
                    this.editingCategory = category;
                    this.categoryForm = { ...category };
                    this.showCategoryForm = true;
                },
                
                async submitCategory() {
                    try {
                        if (this.editingCategory) {
                            // Update category
                            const index = this.categories.findIndex(c => c.id === this.editingCategory.id);
                            if (index !== -1) {
                                this.categories[index] = { ...this.categoryForm, id: this.editingCategory.id };
                            }
                            this.showAlert('success', 'Category updated successfully!');
                        } else {
                            // Add new category
                            const newCategory = {
                                ...this.categoryForm,
                                id: Date.now()
                            };
                            this.categories.push(newCategory);
                            this.showAlert('success', 'Category added successfully!');
                        }
                        this.showCategoryForm = false;
                        this.resetCategoryForm();
                    } catch (error) {
                        this.showAlert('error', 'Failed to save category');
                    }
                },
                
                async deleteCategory(id) {
                    if (confirm('Are you sure you want to delete this category?')) {
                        this.categories = this.categories.filter(c => c.id !== id);
                        this.showAlert('success', 'Category deleted successfully!');
                    }
                },
                
                // Order methods
                async submitOrder() {
                    try {
                        const newOrder = {
                            ...this.orderForm,
                            id: 'PO-' + Date.now(),
                            status: 'pending'
                        };
                        this.orders.push(newOrder);
                        this.showAlert('success', 'Purchase order created successfully!');
                        this.showOrderForm = false;
                        this.resetOrderForm();
                    } catch (error) {
                        this.showAlert('error', 'Failed to create order');
                    }
                },
                
                async updateOrderStatus(orderId, newStatus) {
                    try {
                        const index = this.orders.findIndex(o => o.id === orderId);
                        if (index !== -1) {
                            this.orders[index].status = newStatus;
                            this.showAlert('success', 'Order status updated successfully!');
                        }
                    } catch (error) {
                        this.showAlert('error', 'Failed to update order status');
                    }
                },
                
                // Stock transaction methods
                async submitStockTransaction() {
                    try {
                        const product = this.products.find(p => p.id == this.stockForm.product_id);
                        const newTransaction = {
                            ...this.stockForm,
                            id: Date.now(),
                            product: product?.name || 'Unknown',
                            date: new Date().toLocaleDateString(),
                            note: this.stockForm.notes
                        };
                        this.transactions.push(newTransaction);
                        this.showAlert('success', 'Stock transaction recorded successfully!');
                        this.showStockForm = false;
                        this.resetStockForm();
                    } catch (error) {
                        this.showAlert('error', 'Failed to record transaction');
                    }
                },
                
                // Utility methods
                showAlert(type, message) {
                    this.alert = { show: true, type, message };
                    setTimeout(() => {
                        this.alert.show = false;
                    }, 3000);
                },
                
                delay(ms) {
                    return new Promise(resolve => setTimeout(resolve, ms));
                },
                
                watchOrderCalculation() {
                    this.$watch('orderForm.quantity', () => this.calculateOrderTotal());
                    this.$watch('orderForm.unit_price', () => this.calculateOrderTotal());
                },
                
                calculateOrderTotal() {
                    const quantity = parseFloat(this.orderForm.quantity) || 0;
                    const unitPrice = parseFloat(this.orderForm.unit_price) || 0;
                    this.orderForm.total = (quantity * unitPrice).toFixed(2);
                },
                
                resetForms() {
                    this.resetProductForm();
                    this.resetCategoryForm();
                    this.resetOrderForm();
                    this.resetStockForm();
                },
                
                resetProductForm() {
                    this.productForm = { name: '', description: '', category_id: '', price: '', stock: '' };
                    this.editingProduct = null;
                },
                
                resetCategoryForm() {
                    this.categoryForm = { name: '' };
                    this.editingCategory = null;
                },
                
                resetOrderForm() {
                    this.orderForm = { supplier: '', product_id: '', quantity: '', unit_price: '', total: '', notes: '' };
                },
                
                resetStockForm() {
                    this.stockForm = { product_id: '', type: '', quantity: '', notes: '' };
                },
                
                loadData() {
                    // Load all data when authenticated
                    this.loadSampleData();
                },
                
                loadSampleData() {
                    // Sample categories
                    this.categories = [
                        { id: 1, name: 'Electronics' },
                        { id: 2, name: 'Clothing' },
                        { id: 3, name: 'Books' },
                        { id: 4, name: 'Home & Garden' }
                    ];
                    
                    // Sample products
                    this.products = [
                        { id: 1, name: 'Laptop', description: 'High-performance laptop', category: 'Electronics', category_id: 1, price: 50000, stock: 25 },
                        { id: 2, name: 'T-Shirt', description: 'Cotton T-Shirt', category: 'Clothing', category_id: 2, price: 500, stock: 100 },
                        { id: 3, name: 'Programming Book', description: 'Learn JavaScript', category: 'Books', category_id: 3, price: 1200, stock: 50 },
                        { id: 4, name: 'Garden Tools', description: 'Complete gardening set', category: 'Home & Garden', category_id: 4, price: 2500, stock: 15 }
                    ];
                    
                    // Sample orders
                    this.orders = [
                        { id: 'PO-001', supplier: 'Tech Supplier Ltd', product_id: 1, quantity: 10, unit_price: 45000, total: 450000, status: 'pending' },
                        { id: 'PO-002', supplier: 'Fashion House', product_id: 2, quantity: 50, unit_price: 400, total: 20000, status: 'approved' },
                        { id: 'PO-003', supplier: 'Book Distributor', product_id: 3, quantity: 25, unit_price: 1000, total: 25000, status: 'completed' }
                    ];
                    
                    // Sample transactions
                    this.transactions = [
                        { id: 1, product: 'Laptop', type: 'in', quantity: 5, date: '2024-01-15', note: 'Initial stock' },
                        { id: 2, product: 'T-Shirt', type: 'out', quantity: 10, date: '2024-01-16', note: 'Sale to customer' },
                        { id: 3, product: 'Programming Book', type: 'in', quantity: 20, date: '2024-01-17', note: 'New shipment' }
                    ];
                }
            }
        }
    </script>
</body>
</html>